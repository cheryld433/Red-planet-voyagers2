const db=require("../models"),passport=require("../config/passport");module.exports=function(a){a.post("/api/login",passport.authenticate("local"),(a,b)=>{b.json({email:a.user.email,id:a.user.id})}),a.post("/api/signup",(a,b)=>{db.User.create({email:a.body.email,password:a.body.password,notification:a.body.notification}).then(()=>{b.redirect(307,"/api/login")}).catch(a=>{b.status(401).json(a)})}),a.get("/logout",(a,b)=>{a.logout(),b.redirect("/")}),a.get("/api/user_data",(a,b)=>{a.user?b.json({email:a.user.email,id:a.user.id,notification:a.user.notification}):b.json({})})};